{"version":3,"file":"mdb-angular-ui-kit-collapse.mjs","sources":["../../../projects/mdb-angular-ui-kit/collapse/collapse.directive.ts","../../../projects/mdb-angular-ui-kit/collapse/collapse.module.ts","../../../projects/mdb-angular-ui-kit/collapse/mdb-angular-ui-kit-collapse.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { fromEvent } from 'rxjs';\nimport { take } from 'rxjs/operators';\n\nconst TRANSITION_TIME = 350;\n\n@Directive({\n  // eslint-disable-next-line @angular-eslint/directive-selector\n  selector: '[mdbCollapse]',\n  exportAs: 'mdbCollapse',\n})\n// eslint-disable-next-line @angular-eslint/component-class-suffix\nexport class MdbCollapseDirective {\n  constructor(private _elementRef: ElementRef, private _renderer: Renderer2) {}\n\n  @HostBinding('class.collapse') collapseClass = true;\n\n  @Output() collapseShow: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n  @Output() collapseShown: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n  @Output() collapseHide: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n  @Output() collapseHidden: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n\n  @Input()\n  set collapsed(collapsed: boolean) {\n    if (collapsed !== this._collapsed) {\n      collapsed ? this.hide() : this.show();\n      this._collapsed = collapsed;\n    }\n  }\n  get collapsed(): boolean {\n    return this._collapsed;\n  }\n  private _collapsed = true;\n\n  get host(): HTMLElement {\n    return this._elementRef.nativeElement;\n  }\n\n  private _isTransitioning = false;\n\n  show(): void {\n    if (this._isTransitioning || !this.collapsed) {\n      return;\n    }\n\n    this.collapseShow.emit(this);\n\n    this._renderer.removeClass(this.host, 'collapse');\n    this._renderer.addClass(this.host, 'collapsing');\n\n    this._renderer.setStyle(this.host, 'height', '0px');\n\n    this._isTransitioning = true;\n\n    const scrollHeight = this.host.scrollHeight;\n\n    fromEvent(this.host, 'transitionend')\n      .pipe(take(1))\n      .subscribe(() => {\n        this._isTransitioning = false;\n        this.collapsed = false;\n        this._renderer.removeClass(this.host, 'collapsing');\n        this._renderer.addClass(this.host, 'collapse');\n        this._renderer.addClass(this.host, 'show');\n\n        this._renderer.removeStyle(this.host, 'height');\n\n        this.collapseShown.emit(this);\n      });\n\n    this._emulateTransitionEnd(this.host, TRANSITION_TIME);\n\n    this._renderer.setStyle(this.host, 'height', `${scrollHeight}px`);\n  }\n\n  hide(): void {\n    if (this._isTransitioning || this.collapsed) {\n      return;\n    }\n\n    this.collapseHide.emit(this);\n\n    const hostHeight = this.host.getBoundingClientRect().height;\n\n    this._renderer.setStyle(this.host, 'height', `${hostHeight}px`);\n\n    this._reflow(this.host);\n\n    this._renderer.addClass(this.host, 'collapsing');\n    this._renderer.removeClass(this.host, 'collapse');\n    this._renderer.removeClass(this.host, 'show');\n\n    this._isTransitioning = true;\n\n    fromEvent(this.host, 'transitionend')\n      .pipe(take(1))\n      .subscribe(() => {\n        this._renderer.removeClass(this.host, 'collapsing');\n        this._renderer.addClass(this.host, 'collapse');\n        this._isTransitioning = false;\n        this.collapsed = true;\n\n        this.collapseHidden.emit(this);\n      });\n\n    this._renderer.removeStyle(this.host, 'height');\n    this._emulateTransitionEnd(this.host, TRANSITION_TIME);\n  }\n\n  toggle(): void {\n    if (this._isTransitioning) {\n      return;\n    }\n\n    this.collapsed = !this.collapsed;\n    this.collapsed ? this.hide() : this.show();\n  }\n\n  private _reflow(element: HTMLElement): number {\n    return element.offsetHeight;\n  }\n\n  private _emulateTransitionEnd(element: HTMLElement, duration: number): void {\n    let eventEmitted = false;\n    const durationPadding = 5;\n    const emulatedDuration = duration + durationPadding;\n\n    fromEvent(element, 'transitionend')\n      .pipe(take(1))\n      .subscribe(() => {\n        eventEmitted = true;\n      });\n\n    setTimeout(() => {\n      if (!eventEmitted) {\n        element.dispatchEvent(new Event('transitionend'));\n      }\n    }, emulatedDuration);\n  }\n}\n","import { MdbCollapseDirective } from './collapse.directive';\nimport { NgModule } from '@angular/core';\n\n@NgModule({\n  declarations: [MdbCollapseDirective],\n  exports: [MdbCollapseDirective],\n})\nexport class MdbCollapseModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}